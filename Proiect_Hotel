#include <iostream>
#include <cstring>
using namespace std;

// =================== CLASA CAMERA =====================
class Personal;
class Rezervare;

class Camera {
private:
    char* tip;
    int nrCamera;
    const double pretNoapte;
    static int totalCamere;

public:
    // --- Funcții prietene ---
    friend void afisarePretSiVarsta(const Camera&, const Personal&);
    friend double calculValoareTotala(const Camera&, const Rezervare&);

    // --- Constructori ---
    Camera() : pretNoapte(100.0) {
        tip = new char[strlen("Standard")+1];
        strcpy(tip, "Standard");
        nrCamera = 0;
        totalCamere++;
    }

    Camera(const char* t, int nr, double pret) : pretNoapte(pret) {
        tip = new char[strlen(t)+1];
        strcpy(tip, t);
        nrCamera = nr;
        totalCamere++;
    }

    Camera(const Camera& c) : pretNoapte(c.pretNoapte) {
        tip = new char[strlen(c.tip)+1];
        strcpy(tip, c.tip);
        nrCamera = c.nrCamera;
        totalCamere++;
    }

    // --- Destructor ---
    ~Camera() { delete[] tip; }

    // --- Operator = ---
    Camera& operator=(const Camera& c) {
        if(this != &c) {
            delete[] tip;
            tip = new char[strlen(c.tip)+1];
            strcpy(tip, c.tip);
            nrCamera = c.nrCamera;
        }
        return *this;
    }

    // --- Operator + ---
    Camera operator+(int n) const {
        Camera temp(*this);
        temp.nrCamera += n;
        return temp;
    }

    // --- Operator < ---
    bool operator<(const Camera& c) const { return pretNoapte < c.pretNoapte; }

    // --- Operator << ---
    friend ostream& operator<<(ostream& out, const Camera& c) {
        out << "Camera: " << c.tip << ", nr: " << c.nrCamera << ", pret: " << c.pretNoapte;
        return out;
    }

    // --- Operator >> ---
    friend istream& operator>>(istream& in, Camera& c) {
        char buffer[100];
        cout << "Tip camera: ";
        in >> ws;
        in.getline(buffer, 100);
        delete[] c.tip;
        c.tip = new char[strlen(buffer)+1];
        strcpy(c.tip, buffer);
        cout << "Numar camera: ";
        in >> c.nrCamera;
        return in;
    }

    // --- Get/Set ---
    const char* getTip() const { return tip; }
    int getNrCamera() const { return nrCamera; }
    double getPret() const { return pretNoapte; }
    static int getTotalCamere() { return totalCamere; }

    void setTip(const char* t) {
        delete[] tip;
        tip = new char[strlen(t)+1];
        strcpy(tip, t);
    }

    void setNrCamera(int nr) { nrCamera = nr; }

    static void afisareTotal() {
        cout << "Total camere: " << totalCamere << endl;
    }

    void afisare() const {
        cout << "Camera " << tip << " - Nr: " << nrCamera << " - Pret/noapte: " << pretNoapte << endl;
    }
};
int Camera::totalCamere = 0;


// =================== CLASA PERSONAL =====================
class Personal {
private:
    char* nume;
    int varsta;
    const double salariu;
    static int totalPersonal;

public:
    friend void afisarePretSiVarsta(const Camera&, const Personal&);

    Personal() : salariu(3000.0) {
        nume = new char[strlen("Anonim")+1];
        strcpy(nume, "Anonim");
        varsta = 0;
        totalPersonal++;
    }

    Personal(const char* n, int v, double s) : salariu(s) {
        nume = new char[strlen(n)+1];
        strcpy(nume, n);
        varsta = v;
        totalPersonal++;
    }

    Personal(const Personal& p) : salariu(p.salariu) {
        nume = new char[strlen(p.nume)+1];
        strcpy(nume, p.nume);
        varsta = p.varsta;
        totalPersonal++;
    }

    ~Personal() { delete[] nume; }

    Personal& operator=(const Personal& p) {
        if(this != &p) {
            delete[] nume;
            nume = new char[strlen(p.nume)+1];
            strcpy(nume, p.nume);
            varsta = p.varsta;
        }
        return *this;
    }

    Personal operator+(int ani) const {
        Personal temp(*this);
        temp.varsta += ani;
        return temp;
    }

    bool operator>(const Personal& p) const { return varsta > p.varsta; }

    friend ostream& operator<<(ostream& out, const Personal& p) {
        out << "Personal: " << p.nume << ", varsta: " << p.varsta << ", salariu: " << p.salariu;
        return out;
    }

    friend istream& operator>>(istream& in, Personal& p) {
        char buffer[100];
        cout << "Nume: ";
        in >> ws;
        in.getline(buffer, 100);
        delete[] p.nume;
        p.nume = new char[strlen(buffer)+1];
        strcpy(p.nume, buffer);
        cout << "Varsta: ";
        in >> p.varsta;
        return in;
    }

    const char* getNume() const { return nume; }
    int getVarsta() const { return varsta; }
    double getSalariu() const { return salariu; }
    static int getTotalPersonal() { return totalPersonal; }

    void setNume(const char* n) {
        delete[] nume;
        nume = new char[strlen(n)+1];
        strcpy(nume, n);
    }

    void setVarsta(int v) { varsta = v; }

    static void afisareTotal() {
        cout << "Total personal: " << totalPersonal << endl;
    }

    void afisare() const {
        cout << "Nume: " << nume << ", Varsta: " << varsta << ", Salariu: " << salariu << endl;
    }
};
int Personal::totalPersonal = 0;


// =================== CLASA REZERVARE =====================
class Rezervare {
private:
    int id;
    int nopti;
    const double taxa;
    static int totalRezervari;

public:
    friend double calculValoareTotala(const Camera&, const Rezervare&);

    Rezervare() : id(0), nopti(1), taxa(50.0) { totalRezervari++; }
    Rezervare(int i, int n, double t) : id(i), nopti(n), taxa(t) { totalRezervari++; }
    Rezervare(const Rezervare& r) : id(r.id), nopti(r.nopti), taxa(r.taxa) { totalRezervari++; }

    ~Rezervare() {}

    Rezervare& operator=(const Rezervare& r) {
        if(this != &r) {
            id = r.id;
            nopti = r.nopti;
        }
        return *this;
    }

    Rezervare operator+(int n) const {
        Rezervare temp(*this);
        temp.nopti += n;
        return temp;
    }

    bool operator==(const Rezervare& r) const { return id == r.id; }

    friend ostream& operator<<(ostream& out, const Rezervare& r) {
        out << "Rezervare ID: " << r.id << ", nopti: " << r.nopti << ", taxa: " << r.taxa;
        return out;
    }

    friend istream& operator>>(istream& in, Rezervare& r) {
        cout << "ID rezervare: ";
        in >> r.id;
        cout << "Numar nopti: ";
        in >> r.nopti;
        return in;
    }

    int getId() const { return id; }
    int getNopti() const { return nopti; }
    double getTaxa() const { return taxa; }
    static int getTotalRezervari() { return totalRezervari; }

    void setId(int i) { id = i; }
    void setNopti(int n) { nopti = n; }

    static void afisareTotal() {
        cout << "Total rezervari: " << totalRezervari << endl;
    }

    void afisare() const {
        cout << "Rezervare " << id << " - " << nopti << " nopti - taxa: " << taxa << endl;
    }
};
int Rezervare::totalRezervari = 0;


// =================== CLASA HOTEL (FAZA 5 - RELAȚIE HAS-A) =====================
class Hotel {
private:
    char nume[100];
    int nrCamere;
    int nrAngajati;
    Camera* camere;
    Personal* angajati;

public:
    // --- Constructori ---
    Hotel() {
        strcpy(nume, "Anonim");
        nrCamere = 0;
        nrAngajati = 0;
        camere = nullptr;
        angajati = nullptr;
    }

    Hotel(const char* n, int nrC, int nrA) {
        strcpy(nume, n);
        nrCamere = nrC;
        nrAngajati = nrA;
        camere = new Camera[nrCamere];
        angajati = new Personal[nrAngajati];
    }

    // --- Constructor copiere ---
    Hotel(const Hotel& h) {
        strcpy(nume, h.nume);
        nrCamere = h.nrCamere;
        nrAngajati = h.nrAngajati;
        camere = new Camera[nrCamere];
        angajati = new Personal[nrAngajati];
        for(int i=0;i<nrCamere;i++) camere[i] = h.camere[i];
        for(int i=0;i<nrAngajati;i++) angajati[i] = h.angajati[i];
    }

    // --- Destructor ---
    ~Hotel() {
        delete[] camere;
        delete[] angajati;
    }

    // --- Operator = ---
    Hotel& operator=(const Hotel& h) {
        if(this != &h) {
            delete[] camere;
            delete[] angajati;
            strcpy(nume, h.nume);
            nrCamere = h.nrCamere;
            nrAngajati = h.nrAngajati;
            camere = new Camera[nrCamere];
            angajati = new Personal[nrAngajati];
            for(int i=0;i<nrCamere;i++) camere[i] = h.camere[i];
            for(int i=0;i<nrAngajati;i++) angajati[i] = h.angajati[i];
        }
        return *this;
    }

    // --- Operator << ---
    friend ostream& operator<<(ostream& out, const Hotel& h) {
        out << "Hotel " << h.nume << " are " << h.nrCamere << " camere si " << h.nrAngajati << " angajati.";
        return out;
    }

    // --- Metode ---
    void afisare() const {
        cout << "Hotel " << nume << " are " << nrCamere << " camere si " << nrAngajati << " angajati." << endl;
        for(int i=0;i<nrCamere;i++) camere[i].afisare();
        for(int i=0;i<nrAngajati;i++) angajati[i].afisare();
    }

    void setCamera(int index, const Camera& c) {
        if(index >= 0 && index < nrCamere) camere[index] = c;
    }

    void setAngajat(int index, const Personal& p) {
        if(index >= 0 && index < nrAngajati) angajati[index] = p;
    }
};


// =================== FUNCTII GLOBALE PRIETENE =====================
void afisarePretSiVarsta(const Camera& c, const Personal& p) {
    cout << "Camera " << c.getTip() << " costa " << c.getPret()
         << " lei/noapte, iar angajatul " << p.getNume()
         << " are varsta " << p.getVarsta() << " ani." << endl;
}

double calculValoareTotala(const Camera& c, const Rezervare& r) {
    return c.getPret() * r.getNopti() + r.getTaxa();
}


// =================== MAIN =====================
int main() {

    // Obiecte test
    Camera c1("Lux", 101, 250);
    Personal p1("Miruna", 22, 3500);
    Rezervare r1(1, 3, 100);

    cout << c1 << endl;
    cout << p1 << endl;
    cout << r1 << endl;

    afisarePretSiVarsta(c1, p1);
    cout << "Valoare totala: " << calculValoareTotala(c1, r1) << " lei" << endl;

    // Vectori de obiecte
    int n = 2;
    Camera vCamere[2] = { Camera("Standard", 201, 150), Camera("Deluxe", 202, 200) };
    Personal vPers[2] = { Personal("Ana", 30, 3200), Personal("Ion", 25, 3100) };

    Hotel h1("Zenezia", 2, 2);
    h1.setCamera(0, vCamere[0]);
    h1.setCamera(1, vCamere[1]);
    h1.setAngajat(0, vPers[0]);
    h1.setAngajat(1, vPers[1]);

    cout << endl << "=== HOTEL ===" << endl;
    h1.afisare();

    return 0;
}
