#include <iostream>
#include <cstring>
using namespace std;

// =================== CLASA CAMERA =====================
class Personal;
class Rezervare;

class Camera {
private:
    char* tip;
    int nrCamera;
    const double pretNoapte;
    static int totalCamere;

public:
    // --- Funcții prietene ---
    friend void afisarePretSiVarsta(const Camera&, const Personal&);
    friend double calculValoareTotala(const Camera&, const Rezervare&);

    // --- Constructori ---
    Camera() : pretNoapte(100.0) {
        tip = new char[strlen("Standard")+1];
        strcpy(tip, "Standard");
        nrCamera = 0;
        totalCamere++;
    }

    Camera(const char* t, int nr, double pret) : pretNoapte(pret) {
        tip = new char[strlen(t)+1];
        strcpy(tip, t);
        nrCamera = nr;
        totalCamere++;
    }

    Camera(const Camera& c) : pretNoapte(c.pretNoapte) {
        tip = new char[strlen(c.tip)+1];
        strcpy(tip, c.tip);
        nrCamera = c.nrCamera;
        totalCamere++;
    }

    // --- Destructor ---
    ~Camera() {
        delete[] tip;
    }

    // --- Operator = ---
    Camera& operator=(const Camera& c) {
        if(this != &c) {
            delete[] tip;
            tip = new char[strlen(c.tip)+1];
            strcpy(tip, c.tip);
            nrCamera = c.nrCamera;
        }
        return *this;
    }

    // --- Operator + ---
    Camera operator+(int n) const {
        Camera temp(*this);
        temp.nrCamera += n;
        return temp;
    }

    // --- Operator < ---
    bool operator<(const Camera& c) const {
        return pretNoapte < c.pretNoapte;
    }

    // --- Operator << ---
    friend ostream& operator<<(ostream& out, const Camera& c) {
        out << "Camera: " << c.tip << ", nr: " << c.nrCamera << ", pret: " << c.pretNoapte << endl;
        return out;
    }

    // --- Operator >> ---
    friend istream& operator>>(istream& in, Camera& c) {
        char buffer[100];
        cout << "Tip camera: ";
        in >> ws;
        in.getline(buffer, 100);
        delete[] c.tip;
        c.tip = new char[strlen(buffer)+1];
        strcpy(c.tip, buffer);
        cout << "Numar camera: ";
        in >> c.nrCamera;
        return in;
    }

    // --- Get/Set ---
    const char* getTip() const { return tip; }
    int getNrCamera() const { return nrCamera; }
    double getPret() const { return pretNoapte; }
    static int getTotalCamere() { return totalCamere; }

    void setTip(const char* t) {
        delete[] tip;
        tip = new char[strlen(t)+1];
        strcpy(tip, t);
    }

    void setNrCamera(int nr) { nrCamera = nr; }

    // --- Funcție statică ---
    static void afisareTotal() {
        cout << "Total camere: " << totalCamere << endl;
    }

    // --- Funcție de afișare ---
    void afisare() const {
        cout << "Camera " << tip << " - Nr: " << nrCamera << " - Pret/noapte: " << pretNoapte << endl;
    }
};
int Camera::totalCamere = 0;


// =================== CLASA PERSONAL =====================
class Personal {
private:
    char* nume;
    int varsta;
    const double salariu;
    static int totalPersonal;

public:
    // --- Funcție prietenă ---
    friend void afisarePretSiVarsta(const Camera&, const Personal&);

    // --- Constructori ---
    Personal() : salariu(3000.0) {
        nume = new char[strlen("Anonim")+1];
        strcpy(nume, "Anonim");
        varsta = 0;
        totalPersonal++;
    }

    Personal(const char* n, int v, double s) : salariu(s) {
        nume = new char[strlen(n)+1];
        strcpy(nume, n);
        varsta = v;
        totalPersonal++;
    }

    Personal(const Personal& p) : salariu(p.salariu) {
        nume = new char[strlen(p.nume)+1];
        strcpy(nume, p.nume);
        varsta = p.varsta;
        totalPersonal++;
    }

    // --- Destructor ---
    ~Personal() {
        delete[] nume;
    }

    // --- Operator = ---
    Personal& operator=(const Personal& p) {
        if(this != &p) {
            delete[] nume;
            nume = new char[strlen(p.nume)+1];
            strcpy(nume, p.nume);
            varsta = p.varsta;
        }
        return *this;
    }

    // --- Operator + ---
    Personal operator+(int ani) const {
        Personal temp(*this);
        temp.varsta += ani;
        return temp;
    }

    // --- Operator > ---
    bool operator>(const Personal& p) const {
        return varsta > p.varsta;
    }

    // --- Operator << ---
    friend ostream& operator<<(ostream& out, const Personal& p) {
        out << "Personal: " << p.nume << ", varsta: " << p.varsta << ", salariu: " << p.salariu << endl;
        return out;
    }

    // --- Operator >> ---
    friend istream& operator>>(istream& in, Personal& p) {
        char buffer[100];
        cout << "Nume: ";
        in >> ws;
        in.getline(buffer, 100);
        delete[] p.nume;
        p.nume = new char[strlen(buffer)+1];
        strcpy(p.nume, buffer);
        cout << "Varsta: ";
        in >> p.varsta;
        return in;
    }

    // --- Get/Set ---
    const char* getNume() const { return nume; }
    int getVarsta() const { return varsta; }
    double getSalariu() const { return salariu; }
    static int getTotalPersonal() { return totalPersonal; }

    void setNume(const char* n) {
        delete[] nume;
        nume = new char[strlen(n)+1];
        strcpy(nume, n);
    }

    void setVarsta(int v) { varsta = v; }

    static void afisareTotal() {
        cout << "Total personal: " << totalPersonal << endl;
    }

    void afisare() const {
        cout << "Nume: " << nume << ", Varsta: " << varsta << ", Salariu: " << salariu << endl;
    }
};
int Personal::totalPersonal = 0;


// =================== CLASA REZERVARE =====================
class Rezervare {
private:
    int id;
    int nopti;
    const double taxa;
    static int totalRezervari;

public:
    // --- Funcție prietenă ---
    friend double calculValoareTotala(const Camera&, const Rezervare&);

    Rezervare() : id(0), nopti(1), taxa(50.0) { totalRezervari++; }
    Rezervare(int i, int n, double t) : id(i), nopti(n), taxa(t) { totalRezervari++; }
    Rezervare(const Rezervare& r) : id(r.id), nopti(r.nopti), taxa(r.taxa) { totalRezervari++; }

    ~Rezervare() {}

    Rezervare& operator=(const Rezervare& r) {
        if(this != &r) {
            id = r.id;
            nopti = r.nopti;
        }
        return *this;
    }

    Rezervare operator+(int n) const {
        Rezervare temp(*this);
        temp.nopti += n;
        return temp;
    }

    bool operator==(const Rezervare& r) const {
        return id == r.id;
    }

    friend ostream& operator<<(ostream& out, const Rezervare& r) {
        out << "Rezervare ID: " << r.id << ", nopti: " << r.nopti << ", taxa: " << r.taxa << endl;
        return out;
    }

    friend istream& operator>>(istream& in, Rezervare& r) {
        cout << "ID rezervare: ";
        in >> r.id;
        cout << "Numar nopti: ";
        in >> r.nopti;
        return in;
    }

    int getId() const { return id; }
    int getNopti() const { return nopti; }
    double getTaxa() const { return taxa; }
    static int getTotalRezervari() { return totalRezervari; }

    void setId(int i) { id = i; }
    void setNopti(int n) { nopti = n; }

    static void afisareTotal() {
        cout << "Total rezervari: " << totalRezervari << endl;
    }

    void afisare() const {
        cout << "Rezervare " << id << " - " << nopti << " nopti - taxa: " << taxa << endl;
    }
};
int Rezervare::totalRezervari = 0;


// =================== FUNCTII GLOBALE PRIETENE =====================
void afisarePretSiVarsta(const Camera& c, const Personal& p) {
    cout << "Camera " << c.getTip() << " costa " << c.getPret()
         << " lei/noapte, iar angajatul " << p.getNume()
         << " are varsta " << p.getVarsta() << " ani." << endl;
}

double calculValoareTotala(const Camera& c, const Rezervare& r) {
    return c.getPret() * r.getNopti() + r.getTaxa();
}


// =================== MAIN =====================
int main() {

    int n;
    cout << "Cate camere? "; cin >> n;
    Camera* vCamere = new Camera[n];
    for(int i=0; i<n; i++) {
        cout << "--- Camera " << i+1 << " ---" << endl;
        cin >> vCamere[i];
    }
    for(int i=0; i<n; i++) vCamere[i].afisare();

    int m;
    cout << "Cate persoane? "; cin >> m;
    Personal* vPers = new Personal[m];
    for(int i=0; i<m; i++) {
        cout << "--- Personal " << i+1 << " ---" << endl;
        cin >> vPers[i];
    }
    for(int i=0; i<m; i++) vPers[i].afisare();

    int k;
    cout << "Cate rezervari? "; cin >> k;
    Rezervare* vRez = new Rezervare[k];
    for(int i=0; i<k; i++) {
        cout << "--- Rezervare " << i+1 << " ---" << endl;
        cin >> vRez[i];
    }
    for(int i=0; i<k; i++) vRez[i].afisare();

    cout << endl << "=== Functii prietene ===" << endl;
    if(n > 0 && m > 0)
        afisarePretSiVarsta(vCamere[0], vPers[0]);
    if(n > 0 && k > 0)
        cout << "Valoare totala cazare: " << calculValoareTotala(vCamere[0], vRez[0]) << " lei" << endl;

    int rLinii, rColoane;
    cout << "Introduceti dimensiuni matrice camere (linii coloane): ";
    cin >> rLinii >> rColoane;
    Camera** matrice = new Camera*[rLinii];
    for(int i=0; i<rLinii; i++) matrice[i] = new Camera[rColoane];

    cout << "Introduceti camere pentru matrice:" << endl;
    for(int i=0; i<rLinii; i++) {
        for(int j=0; j<rColoane; j++) {
            cout << "Camera[" << i << "][" << j << "]" << endl;
            cin >> matrice[i][j];
        }
    }

    cout << "Afisare matrice:" << endl;
    for(int i=0; i<rLinii; i++) {
        for(int j=0; j<rColoane; j++) {
            cout << matrice[i][j] << " ";
        }
        cout << endl;
    }

    for(int i=0; i<rLinii; i++) delete[] matrice[i];
    delete[] matrice;

    delete[] vCamere;
    delete[] vPers;
    delete[] vRez;

    return 0;
}
